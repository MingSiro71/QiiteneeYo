[{"url":"https://qiita.com/english_muffin/items/4674269d06fd7f9d1b02","title":"defer内でのエラーを考慮する。","body":"# はじめに\n- `defer`句でエラーが起きたらどうするか\n\n# 結論\n- ※個人的に良いなと思ったものです。\n- `close`時に発生したエラーとオリジナルのエラーの両方をログなどで確認することができる。\n\n```golang\ndefer func() {\n    deferError := c.Close() //c.Closeはエラーを返す可能性があります。\n    if deferError == nil {\n      return\n    }\n    err = fmt.Errorf(\"close: %v,  original: %v\", deferError, err)\n}()\n\n//よくない例\ndefer c.Close()\n```\n\n# 参考\n[Go 言語(Golang) はまりどころと解決策](https://www.yunabe.jp/docs/golang_pitfall.html#defer-%E3%81%AE%E4%B8%AD%E3%81%A7%E7%99%BA%E7%94%9F%E3%81%97%E3%81%9F-error-%E3%82%92%E5%87%A6%E7%90%86%E3%81%97%E5%BF%98%E3%82%8C%E3%82%8B)\n\n\n\n\n","user":"english_muffin","created_at":"2021-03-28T22:38:04+09:00","updated_at":"2021-03-28T22:38:04+09:00"},{"url":"https://qiita.com/rei1129/items/dba6b00e75ae9019134d","title":"herokuで画像を正しく配置しているのにActionView::Template::Errorがでる場合の対処法","body":"\n\n# 背景\n作成したアプロケーションをherokuにデプロイしたところ下記のエラー画面が表示された\n![スクリーンショット 2021-03-28 17.26.57.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1248254/b2fb3aa4-8b18-519a-190d-a13668836c51.png)\n\nログを確認してみると以下のようなエラー文が表示されている。\n\n```ruby\nActionView::Template::Error (The asset \"slider-01.jpeg\" is not present in the asset pipeline.\n```\nトップページに使用しているslider-01.jpegがassetに配置されていないと言われているがローカルでは問題なく表示されている。\n画像のサイズの問題かと思い、画像サイズの変更も行ったが改善は見られなかった。\n\n# 環境\nruby 2.6.5\nRails 6.0.3.5\nheroku/7.51.0\n\n# 解決方法\n\n試行錯誤の結果、jpegファイルが問題ではないかと仮説を立て、試しにpngファイルに変更してみるとエラーは表示されなくなった。\n\nどうやらherokuではjpg、pngは問題なく使用できますがjpegになると不具合が起きるようです。\n\n# 最後に\n初投稿ですので見づらい箇所がございましたら申し訳ございません。\nどなたかの参考になりましたら幸いです。\n\n","user":"rei1129","created_at":"2021-03-28T21:59:19+09:00","updated_at":"2021-03-28T21:59:19+09:00"},{"url":"https://qiita.com/tsuhiro_kttn/items/490dcd4a12a8c240504a","title":"GPUは認識しているのにgeneratorを使うとcuDNN初期化エラーが出たけど解決した話","body":"ドハマりしました。\n何とか解決できたので同じ悩みの方のお役に立てるよう解決策をメモします。\n\n#環境\n\n- Anaconnda\n- GPU : NVIDIA Geforce RTX 2060 with Max-Q\n- tensorflow-gpu : 2.1.0\n- cudatoolkit : 10.1\n- cudnn : 7.6.5\n\n#症状\n対応表を見てGPUに合ったTensorflow, CUDA, cuDNNをインストール、GPUが認識され自作CNNでGPUが使えていることまでは確認しました。\n\nしかし、量の多いデータを処理する時にImagegenerator を使ったところ、モデル学習のところで下記エラーが発生。\n\n`Unknown: Failed to get convolution algorithm. This is probably because cuDNN failed to initialize, so try looking to see if a warning log message was printed above.`\n\n調べてもGPUがそもそも認識していない場合の対処方法が多くあまり参考になりませんでした。\n\n#解決法\n下記の記事を参考にして解決。\n<https://note.com/axg28923/n/na41c975d212c>\n\nまずAnaconda promptでエラーが吐かれた場所を確認。\n`Successfully opened dynamic library cudnn64_7.dll`\nがありcudnn64_7.dllファイルをtennsorflowが読みに行けている。\n\n問題は、\n`Could not create cudnn handle: CUDNN_STATUS_ALLOC_FAILE`\nとあるのでGPUは動く気はある。問題はメモリ。\n\n環境変数を設定して対応。\nwindowsの検索窓から「システム環境変数の編集」を選択。\n詳細設定から環境変数を選択。\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/690432/1d642ece-fa2c-a398-d5dd-426642099ba3.png)\n\nシステム環境変数を新規登録。\n変数名は「TF_FORCE_GPU_ALLOW_GROWTH」\n変数値は「true」と記入。\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/690432/6c9f3d77-3c0d-4247-f84a-8461f3c199d1.png)\n\n再起動すれば完了。\n晴れてcudnnが使えるようになりました。\n","user":"tsuhiro_kttn","created_at":"2021-03-28T21:48:58+09:00","updated_at":"2021-03-28T21:48:58+09:00"},{"url":"https://qiita.com/syota_19910612bscplog/items/c9789a9686733b3587c4","title":"MAMP環境でtimezoneが反映されない問題の解決過去記事による罠","body":"## タイムゾーンが反映されない問題について\n### 疑う箇所\n- 編集しているphp.iniファイルは合っている？(php.infoから確認できます)\n- コメントアウトされてない？\n- 編集後に再起動した？\n\n\n## 本題\n「PHP MAMP タイムゾーンが反映されない」などで検索すると同じような解決策がずらりと並びます。\nですが今回の問題は上記にあげた疑う箇所によるものではないです。\nというのも過去記事にもMAMPのデフォルトでも同じように以下の記載になっています。\n\n```\n[Date]\n; Defines the default timezone used by the date functions\n; http://php.net/date.timezone\n; date.timezone = \"Europe/Berlin\"\n```\n\nこれを\n\n```\n[Date]\n; Defines the default timezone used by the date functions\n; http://php.net/date.timezone\ndate.timezone = \"Asia/Tokyo\"\n```\n\nと書いたら動きそうですよね？\nでもこれではうまくいきません。\n理由は簡単で「\"\"」が悪さをしています\nこれを\n\n```\ndate.timezone = Asia/Tokyo\n\nまたは\n\ndate.timezone = 'Asia/Tokyo'\n```\nに変更で動きました！\nいやー罠でした。\n\n## 後書き\n以前は「\"\"」でできてたものと推測しますが\n今はなぜできないのか調べても出てきませんでした。\nもしご存知の方いればご教授いただけたらと幸いです。\n","user":"syota_19910612bscplog","created_at":"2021-03-28T19:09:02+09:00","updated_at":"2021-03-28T19:09:02+09:00"},{"url":"https://qiita.com/ren_nomura/items/99dbf702fbaa73f4a8a9","title":"M1 Mac、pod 'FirebaseUI/Storage'やpod 'SDWebImageSwiftUI'でエラーが出るときの対処法","body":"M1 Macでpod 'FirebaseUI/Storage'をPodfileに追加してpod installした時、エラーに遭遇したので対処法を共有します。\n\n#対処法\n対処法は単純、多分、ユニバーサルバイナリ使ってIntelアーキテクチャで実行ってこと\n\n```bash\narch -x86_64 pod install\n```\n何かと便利そうなので、すぐ使えるようにaliasを切っておきます。M1 Macだとデフォルトがzshなのでルートディレクトリの.zshrcを編集、なかったら作成します。\n\n```bash:~/.zshrc\nalias intel=\"arch -x86_64\"\n```\n以下で読み込み。\n\n```bash\nsource ~/.zshrc\n```\nこうすれば、これだけでOK。\n\n```bash\n\nintel pod install \n```\n\nお疲れ様でした！\n","user":"ren_nomura","created_at":"2021-03-28T18:05:31+09:00","updated_at":"2021-03-28T18:05:31+09:00"},{"url":"https://qiita.com/kazuyaseo/items/355bf823022e1f661796","title":"MacOS Big SurでHomesteadを立ち上げようとしたらエラー","body":"MacOSをBigSurに更新するタイミングで、一気にクリーンインストールを実施。\nその後、改めてHomesteadの実行をしようとしたら、vagrant up を実行したタイミングで以下のようなエラーが出た。\n\n### 環境\nOS: MacOS Big Sur 11.2.2\n\n### エラー内容\n\n```\nThere was an error while executing `VBoxManage`, a CLI used by Vagrant\nfor controlling VirtualBox. The command and stderr is shown below.\n\nCommand: [\"hostonlyif\", \"create\"]\n\nStderr: 0%...\nProgress state: NS_ERROR_FAILURE\nVBoxManage: error: Failed to create the host-only adapter\nVBoxManage: error: VBoxNetAdpCtl: Error while adding new interface: failed to open /dev/vboxnetctl: No such file or directory\nVBoxManage: error: Details: code NS_ERROR_FAILURE (0x80004005), component HostNetworkInterfaceWrap, interface IHostNetworkInterface\nVBoxManage: error: Context: \"RTEXITCODE handleCreate(HandlerArg *)\" at line 94 of file VBoxManageHostonly.cpp\n```\n\n### 原因\n色々と探し回ったところ、VirtualBoxの再インストールで解決すると書いてあったため、以下URLより再インストールを実施。\nhttps://www.oracle.com/virtualization/technologies/vm/downloads/virtualbox-downloads.html\nそれでも同じエラーのため、他を見回ったところ、設定の「セキュリティとプライバシー」からソフトウェアの許可を行う必要がある様子。\n\n### 対処方法\n\nMacの システム環境設定 > セキュリティとプライバシー を表示し、\n「開発元\"Oracle America, Inc.\"のシステムソフトウェアの読み込みがブロックされました。」の項目横にある「許可」ボタンをクリックして許可を実施。\nその後、念の為VirtualBoxを再インストールしました。\n\n上記を実施することで解決しました。\n","user":"kazuyaseo","created_at":"2021-03-28T17:36:55+09:00","updated_at":"2021-03-28T18:06:16+09:00"},{"url":"https://qiita.com/Tomonorarari/items/84f4342ea3f07b37c018","title":"ECSを使って3D弾幕シューティングを作ろうとした際に詰まったところと解決方法","body":"#目次\n**1.環境**\n**2.作っているもの**\n**3.詰まったところと解決方法**\n**4.参考URL**\n \n##1.環境\nUnityVersion:2019.4.17f1\n導入Package\n-Burst 1.3.0\n-Entities 0.11.1\n-Jobs 0.2.10\n-Hybrid Renderer 0.5.2\n-Unity Physics 0.4.1\n\n\n##2.作っているもの\n東方Projrctの2D弾幕シューティングを3Dにしてみよう！って感じで製作中です。\n今は最大約9万個の弾を制御しFPSを60以上を保ちながら実行できるようになっています。\n![2w.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1210726/a50b2d0d-b9d9-8f34-80cf-29f8b1bfd4c0.png)\n![4w.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1210726/b792612e-7100-719c-3a67-5b511b586552.png)\n\n\n##3.詰まったところと解決方法\n**1.Entityに変換したオブジェクトが出ない！**\n└`Hybrid Renderer` の導入を忘れていた！\n**2.Unity Physicsで当たり判定を実装したら動作が重すぎた！**\n  └1.`Physics Shape`の`CollisionResposns`を `Raise Trigger Events`に変更\n※私の作っているものでは当たったかどうかだけでよかったので`Trigger Events`にしました。\n![スクリーンショット (99).png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1210726/990f6d76-27d5-c6c9-db73-8532130ef65b.png)\n　2.CollisionResposns 変更に伴いスクリプトの変更 \n　下の画像の赤丸の部分を `ICollisonEventsJob`から`ITriggerEventsJob`に変更し、`CollisonEvents`から`TriggerEvents`に変更。\n![スクリーンショット (101).png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1210726/556d6677-1dd3-e539-b963-462e8880f3cd.png)\n　3.`Physics Shape`の`Collision Filter`設定\n![スクリーンショット (100).png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1210726/3e1836bc-d7e5-66db-f908-23beace255fe.png)\n　`Belongs To`・・・そのオブジェクトの所属するコライダーグループ\n　`Collides With`・・・そのオブジェクトと衝突するコライダーグループ\n　これらを設定することで30FPSも出なかったものが90FPSで動くようになりました。\n\n**3.シーン遷移時にEntityが残ってしまう!**\n　└遷移前にEntityManagerクラスの `public void DestroyEntity(NativeArray<Entity> entities)`でEntityをすべて破棄することで解決。同クラスの`public NativeArray<Entity> GetAllEntities(Allocator allocator = null)`ですべてのEntityを取得することができるので組み合わせて全部破棄できました。\n\n**4.参考URL**\n[Unity Scripting API:Unity.Entities](https://docs.unity3d.com/Packages/com.unity.entities@0.0/api/Unity.Entities.html)\n[Unity Manual:Unity Physics](https://docs.unity3d.com/Packages/com.unity.physics@0.4/manual/index.html)\n\nDOTSを触り始めて1,2カ月ほどの初心者なので間違っていることろなどがあると思いますので、指摘いただけると助かります！\n何かの参考になれば幸いです。\n","user":"Tomonorarari","created_at":"2021-03-28T16:46:31+09:00","updated_at":"2021-03-28T16:46:31+09:00"},{"url":"https://qiita.com/Moo_Moo_Farm/items/9dcd950049ab5493c395","title":"ERROR: Table has no partition for value from ...","body":"## 概要\nテーブルにレンジパーティションを貼る時、終端まで定義しないと、最後のレンジを超えた時に insert できなくてエラー発生する。\n\nそのため、「キャッチオール」を定義して、パーティションの終端を用意する。\n\n## 対策\n\n```sql\nPARTITION pmax VALUES LESS THAN MAXVALUE\n```\n\n- 参考URL\n    - [mysql \\- ERROR 1526 \\(HY000\\): Table has no partition for value 1426566990 \\- Stack Overflow](https://stackoverflow.com/questions/29694539/error-1526-hy000-table-has-no-partition-for-value-1426566990/29695312)\n    - [MySQLのパーティショニング \\- 祈れ、そして働け ～ Ora et labora](https://tetsuyai.hatenablog.com/entry/20110308/1299569576)\n    - [MySQL : 第15章 パーティショニング \\- LANDHERE](https://landhere.jp/docs/manual/mysql/partitioning.html#partitioning-range)\n    - [MySQL :: MySQL 5\\.6 リファレンスマニュアル :: 19\\.2\\.1 RANGE パーティショニング](https://dev.mysql.com/doc/refman/5.6/ja/partitioning-range.html)\n    - [pdf | 実践！パーティションの基本から実装例まで](https://www.oracle.com/technetwork/jp/ondemand/database/db-technique/d-12-disk-1484778-ja.pdf)\n","user":"Moo_Moo_Farm","created_at":"2021-03-28T16:42:04+09:00","updated_at":"2021-03-28T16:42:04+09:00"},{"url":"https://qiita.com/Moo_Moo_Farm/items/c9840db01b20c3a2abdb","title":"rsync --delete でサーバを壊した時の原因","body":"\n## 概要\nrsync --delete をシェルスクリプトに仕込んでサーバ壊滅した。\n\n## 事象\n\nbashCMS2 中の ./deploy コマンド実行で、サーバを吹っ飛ばした。\n[ryuichiueda/bashcms2: a little CMS system written with bash](https://github.com/ryuichiueda/bashcms2)\n\n原因は、コード手入力により不可視文字が入り込んだようで、 bin/conf ファイルを読み込めてなかったこと。\n\n./deploy 中の rsync は、bin/conf ファイルで設定された変数を元にして、実行される。\nそのため、引数が空になって、残った `/` が指定されてしまい、サーバを吹っ飛ばした。\n\n## 対策\n\n今から思えば、VSCode で ./deploy を開いていた時、txt ファイルのシンタックスカラーだったので、そこで違和感を持つべきだった。\n\nrsync --delete で引数を使用する時は、気をつけるべき。\n","user":"Moo_Moo_Farm","created_at":"2021-03-28T16:40:39+09:00","updated_at":"2021-03-28T16:40:39+09:00"},{"url":"https://qiita.com/herishiro/items/60bb52fe93ff42ee3cb0","title":"[Next.js]動的ルーティングページ間で外部データが更新されない問題","body":"## 問題\n\n動的ルーティング（dynamic routing）で生成されるページ内で、パス情報に依存したデータを外部取得している。\n他のページから移動したときは正常にデータを取得できるのに、動的パスのページ間で移動すると前のデータが残ってしまう！\n\n## TL;DR\n\n_app.tsxファイルをこの状態から\n\n```tsx:_app.tsx\nfunction MyApp({ Component, pageProps}: AppProps) {\n\treturn (\n\t\t\t...省略...\n\t\t\t<Component {...pageProps} />\n\t);\n}\n```\n↓下記のように、**router.asPathを元にkey属性を指定**すればOK\n\n```tsx:_app.tsx\nfunction MyApp({ Component, pageProps, router }: AppProps) {\n\treturn (\n\t\t\t...省略...\n\t\t\t<Component {...pageProps} key={router.asPath} />\n\t);\n}\n```\n\n## 解説\n\nこちらの[issue](https://github.com/vercel/next.js/issues/9992)で話し合われている内容です。\n根本的な原因は、動的ルーティングで生成されるページコンポーネントにkey属性がデフォルトで付いてないため、ルーティングされてもその内容が上手く更新されない事のようです。\nなので_app.tsxにあるグローバルなコンポーネントにkeyを付ければ解決するという、分かってみれば非常に分かりやすい解決策でした。\n\n[解決してくれたコメント] (https://github.com/vercel/next.js/issues/9992#issuecomment-784133959) 先月末のコメント、ツイてるな～\n\n\n### in my case\n\nちなみにissueはgetStaticPropsなどの外部データロード用の関数についてでしたが、自分の場合は別ファイルにあるサンプル日記データを、動的パスに含まれる日付をもとに検索して、その日の日記を取得し、useReducer()のinitialValueにセットして過去の日記を見るページを作っているときにこの問題にぶつかりました。\nある日の日記から別の日の日記に移動しようとすると、日記の内容が前のままになってしまう状態でした。\n\n上記の方法でreducerのstateを直接反映する部分はスマートに解決できたのですが、\n一点、stateのプロパティの内容を判定して日記の記入状態(empty or filled)を表示する部分は、useEffectのdependancyListに「stateに一意の値」（この場合は日記の日付）を指定する必要がありました。\n\n```tsx:.tsx\n    const [status, setStatus] = useState<Status>(\"empty\");\n\tuseEffect(() => {\n\t\tinitStatus({\n\t\t\tinputText1: field1.inputText,\n\t\t\tinputText2: field2.inputText,\n\t\t\tsetStatus,\n\t\t});\n\t}, [state.log.date]); //以前は[]にしていた\n\n... //2種類の入力欄がある日記が全部空かどうか判定してstatusを更新する関数\nconst initStatus = ({ inputText1, inputText2, setStatus }) => {\n\tconst allEmpty = [inputText1, inputText2].every((value) => !value);\n\tif (!allEmpty) {\n\t\tsetStatus(\"filled\");\n\t} else {\n\t\tsetStatus(\"empty\");\n\t}\n};\n\n```\n","user":"herishiro","created_at":"2021-03-28T16:20:18+09:00","updated_at":"2021-03-28T17:05:32+09:00"},{"url":"https://qiita.com/Akiko3221/items/e2897a9713261e0bb792","title":"Heroku push CSS 反映されない","body":"##問題\nCSSを変更し、herokumにpushしたが、反映されていない\n\n##前提条件\nこのようにコマンドを実行したがうまく行かない\n\n```\n\n$git add .\n\n$git commit -m \"コミット名\"\n\n//githabにpushする↓\n$git push origin master\n\n$git push heroku master\n\n$heroku open\n\n```\n\n##結果\nブラウザの更新ボタンを右クリックし、\nキャッシュの削除とハード再読み込み　ボタンを押したら解決。\n\n\n\n\nキャッシュが残っていたみたい。。\n","user":"Akiko3221","created_at":"2021-03-28T15:59:03+09:00","updated_at":"2021-03-28T15:59:03+09:00"}]